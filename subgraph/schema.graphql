type ContributionAdded @entity(immutable: true) {
  id: Bytes!
  user: Bytes! # address
  nodeId: String! # string
  ipfsHash: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type EdgeAdded @entity(immutable: true) {
  id: Bytes!
  techTreeId: BigInt! # uint256
  source: String! # string
  target: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type NodeAdded @entity(immutable: true) {
  id: Bytes!
  nodeId: String! # string
  techTreeId: BigInt! # uint256
  title: String! # string
  nodeType: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type NodeFinished @entity(immutable: true) {
  id: Bytes!
  nodeId: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type RfpAdded @entity(immutable: true) {
  id: Bytes!
  nodeId: String! # string
  _ipfsHash: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type TechTreeAdded @entity(immutable: true) {
  id: Bytes!
  techTreeId: BigInt! # uint256
  title: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type TechTreeUpdated @entity(immutable: true) {
  id: Bytes!
  techTreeId: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type TreasuryAdded @entity(immutable: true) {
  id: Bytes!
  nodeId: String! # string
  amount: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type TechTree @entity {
  id: ID!
  title: String
  techTreeId: BigInt!
  lastUpdatedBlockNumber: BigInt!
  lastUpdatedBlockTimestamp: BigInt!
  lastUpdatedTransactionHash: Bytes!
  nodes: [Node!]! @derivedFrom(field: "techTree")
  edges: [Edge!]! @derivedFrom(field: "techTree")
}

type Node @entity {
  id: ID!
  title: String!
  nodeType: String!
  techTree: TechTree!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Edge @entity {
  id: ID!
  source: String!
  target: String!
  techTree: TechTree!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}
